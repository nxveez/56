-- Modern Teleport GUI by Siexther
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- Konfigurasi
local CONFIG = {
    SaveFile = "./SiextherTeleport.json",
    StrokeColor = Color3.fromRGB(70, 130, 255),
    BackgroundColor = Color3.fromRGB(15, 20, 35),
    SecondaryColor = Color3.fromRGB(25, 30, 45),
    TextColor = Color3.fromRGB(240, 245, 255),
    AccentColor = Color3.fromRGB(70, 130, 255)
}

-- Data teleport
local teleportData = {}

-- Fungsi untuk load data
local function loadTeleportData()
    if isfile and readfile and isfile(CONFIG.SaveFile) then
        local success, data = pcall(function()
            return HttpService:JSONDecode(readfile(CONFIG.SaveFile))
        end)
        if success and data then
            teleportData = data
        end
    end
end

-- Fungsi untuk save data
local function saveTeleportData()
    if writefile then
        local success = pcall(function()
            writefile(CONFIG.SaveFile, HttpService:JSONEncode(teleportData))
        end)
    end
end

-- Load data saat start
loadTeleportData()

-- Buat ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SiextherTeleport"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 280, 0, 320)
MainFrame.Position = UDim2.new(0.5, -140, 0.5, -185)
MainFrame.BackgroundColor3 = CONFIG.BackgroundColor
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

-- Stroke untuk MainFrame
local MainStroke = Instance.new("UIStroke")
MainStroke.Color = CONFIG.StrokeColor
MainStroke.Thickness = 2
MainStroke.Parent = MainFrame

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

-- Header
local Header = Instance.new("Frame")
Header.Name = "Header"
Header.Size = UDim2.new(1, 0, 0, 40)
Header.BackgroundColor3 = CONFIG.SecondaryColor
Header.BorderSizePixel = 0
Header.Parent = MainFrame

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 12)
HeaderCorner.Parent = Header

-- Fix corner di bawah header
local HeaderFix = Instance.new("Frame")
HeaderFix.Size = UDim2.new(1, 0, 0, 12)
HeaderFix.Position = UDim2.new(0, 0, 1, -12)
HeaderFix.BackgroundColor3 = CONFIG.SecondaryColor
HeaderFix.BorderSizePixel = 0
HeaderFix.Parent = Header

-- Title
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, -80, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "SIEXTHER TELEPORT"
Title.TextColor3 = CONFIG.StrokeColor
Title.TextSize = 16
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Header

-- Minimize Button
local MinimizeBtn = Instance.new("TextButton")
MinimizeBtn.Name = "MinimizeBtn"
MinimizeBtn.Size = UDim2.new(0, 30, 0, 30)
MinimizeBtn.Position = UDim2.new(1, -70, 0.5, -15)
MinimizeBtn.BackgroundColor3 = CONFIG.BackgroundColor
MinimizeBtn.Text = "‚àí"
MinimizeBtn.TextColor3 = CONFIG.TextColor
MinimizeBtn.TextSize = 20
MinimizeBtn.Font = Enum.Font.GothamBold
MinimizeBtn.BorderSizePixel = 0
MinimizeBtn.Parent = Header

local MinCorner = Instance.new("UICorner")
MinCorner.CornerRadius = UDim.new(0, 6)
MinCorner.Parent = MinimizeBtn



-- Close Button
local CloseBtn = Instance.new("TextButton")
CloseBtn.Name = "CloseBtn"
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -35, 0.5, -15)
CloseBtn.BackgroundColor3 = CONFIG.BackgroundColor
CloseBtn.Text = "√ó"
CloseBtn.TextColor3 = Color3.fromRGB(255, 80, 80)
CloseBtn.TextSize = 22
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.BorderSizePixel = 0
CloseBtn.Parent = Header

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 6)
CloseCorner.Parent = CloseBtn

-- Content Area
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, -20, 1, -100)
ContentFrame.Position = UDim2.new(0, 10, 0, 50)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = MainFrame

-- ScrollingFrame untuk list teleport
local TeleportList = Instance.new("ScrollingFrame")
TeleportList.Name = "TeleportList"
TeleportList.Size = UDim2.new(1, 0, 1, -50)
TeleportList.Position = UDim2.new(0, 0, 0, 0)
TeleportList.BackgroundTransparency = 1
TeleportList.BorderSizePixel = 0
TeleportList.ScrollBarThickness = 4
TeleportList.ScrollBarImageColor3 = CONFIG.StrokeColor
TeleportList.CanvasSize = UDim2.new(0, 0, 0, 0)
TeleportList.Parent = ContentFrame

local ListLayout = Instance.new("UIListLayout")
ListLayout.SortOrder = Enum.SortOrder.LayoutOrder
ListLayout.Padding = UDim.new(0, 8)
ListLayout.Parent = TeleportList

-- Bottom Frame untuk input
local BottomFrame = Instance.new("Frame")
BottomFrame.Name = "BottomFrame"
BottomFrame.Size = UDim2.new(1, -20, 0, 40)
BottomFrame.Position = UDim2.new(0, 10, 1, -45)
BottomFrame.BackgroundColor3 = CONFIG.SecondaryColor
BottomFrame.BorderSizePixel = 0
BottomFrame.Parent = MainFrame

local BottomCorner = Instance.new("UICorner")
BottomCorner.CornerRadius = UDim.new(0, 8)
BottomCorner.Parent = BottomFrame

local BottomStroke = Instance.new("UIStroke")
BottomStroke.Color = CONFIG.StrokeColor
BottomStroke.Thickness = 1.5
BottomStroke.Parent = BottomFrame

-- Input untuk nama
local NameInput = Instance.new("TextBox")
NameInput.Name = "NameInput"
NameInput.Size = UDim2.new(1, -90, 1, -10)
NameInput.Position = UDim2.new(0, 10, 0, 5)
NameInput.BackgroundTransparency = 1
NameInput.Text = ""
NameInput.PlaceholderText = "Nama lokasi..."
NameInput.TextColor3 = CONFIG.TextColor
NameInput.PlaceholderColor3 = Color3.fromRGB(150, 160, 180)
NameInput.TextSize = 14
NameInput.Font = Enum.Font.Gotham
NameInput.TextXAlignment = Enum.TextXAlignment.Left
NameInput.ClearTextOnFocus = false
NameInput.Parent = BottomFrame

-- Save Button
local SaveBtn = Instance.new("TextButton")
SaveBtn.Name = "SaveBtn"
SaveBtn.Size = UDim2.new(0, 70, 1, -10)
SaveBtn.Position = UDim2.new(1, -75, 0, 5)
SaveBtn.BackgroundColor3 = CONFIG.AccentColor
SaveBtn.Text = "Save"
SaveBtn.TextColor3 = CONFIG.TextColor
SaveBtn.TextSize = 13
SaveBtn.Font = Enum.Font.GothamBold
SaveBtn.BorderSizePixel = 0
SaveBtn.Parent = BottomFrame

local SaveCorner = Instance.new("UICorner")
SaveCorner.CornerRadius = UDim.new(0, 6)
SaveCorner.Parent = SaveBtn

-- Floating Button (hidden by default)
local FloatingBtn = Instance.new("TextButton")
FloatingBtn.Name = "FloatingBtn"
FloatingBtn.Size = UDim2.new(0, 41, 0, 41)
FloatingBtn.Position = UDim2.new(1, -70, 0, 20)
FloatingBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
FloatingBtn.Text = "üï≥Ô∏è"
FloatingBtn.TextSize = 20
FloatingBtn.Font = Enum.Font.GothamBold
FloatingBtn.BorderSizePixel = 0
FloatingBtn.Visible = false
FloatingBtn.Draggable = true
FloatingBtn.Parent = ScreenGui

local FloatCorner = Instance.new("UICorner")
FloatCorner.CornerRadius = UDim.new(0, 12)
FloatCorner.Parent = FloatingBtn


-- Fungsi untuk update list
local function updateTeleportList()
    for _, child in ipairs(TeleportList:GetChildren()) do
        if child:IsA("Frame") then
            child:Destroy()
        end
    end
    
    local ySize = 0
    for name, data in pairs(teleportData) do
        local ItemFrame = Instance.new("Frame")
        ItemFrame.Name = name
        ItemFrame.Size = UDim2.new(1, 0, 0, 45)
        ItemFrame.BackgroundColor3 = CONFIG.SecondaryColor
        ItemFrame.BorderSizePixel = 0
        ItemFrame.Parent = TeleportList
        
        local ItemCorner = Instance.new("UICorner")
        ItemCorner.CornerRadius = UDim.new(0, 8)
        ItemCorner.Parent = ItemFrame
        
        local ItemStroke = Instance.new("UIStroke")
        ItemStroke.Color = CONFIG.StrokeColor
        ItemStroke.Thickness = 1.5
        ItemStroke.Transparency = 0.5
        ItemStroke.Parent = ItemFrame
        
        local ItemLabel = Instance.new("TextLabel")
        ItemLabel.Size = UDim2.new(1, -100, 1, 0)
        ItemLabel.Position = UDim2.new(0, 15, 0, 0)
        ItemLabel.BackgroundTransparency = 1
        ItemLabel.Text = "üìç " .. name
        ItemLabel.TextColor3 = CONFIG.TextColor
        ItemLabel.TextSize = 14
        ItemLabel.Font = Enum.Font.GothamMedium
        ItemLabel.TextXAlignment = Enum.TextXAlignment.Left
        ItemLabel.Parent = ItemFrame
        
        local TeleportBtn = Instance.new("TextButton")
        TeleportBtn.Size = UDim2.new(0, 35, 0, 30)
        TeleportBtn.Position = UDim2.new(1, -75, 0.5, -15)
        TeleportBtn.BackgroundColor3 = CONFIG.AccentColor
        TeleportBtn.Text = "üöÄ"
        TeleportBtn.TextSize = 16
        TeleportBtn.Font = Enum.Font.GothamBold
        TeleportBtn.BorderSizePixel = 0
        TeleportBtn.Parent = ItemFrame
        
        local TpCorner = Instance.new("UICorner")
        TpCorner.CornerRadius = UDim.new(0, 6)
        TpCorner.Parent = TeleportBtn
        
        local DeleteBtn = Instance.new("TextButton")
        DeleteBtn.Size = UDim2.new(0, 35, 0, 30)
        DeleteBtn.Position = UDim2.new(1, -35, 0.5, -15)
        DeleteBtn.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
        DeleteBtn.Text = "X"
        DeleteBtn.TextSize = 14
        DeleteBtn.Font = Enum.Font.GothamBold
        DeleteBtn.BorderSizePixel = 0
        DeleteBtn.Parent = ItemFrame
        
        local DelCorner = Instance.new("UICorner")
        DelCorner.CornerRadius = UDim.new(0, 6)
        DelCorner.Parent = DeleteBtn
        
        -- Teleport function dengan smooth tween
        TeleportBtn.MouseButton1Click:Connect(function()
            if character and character:FindFirstChild("HumanoidRootPart") then
                local hrp = character.HumanoidRootPart
                local targetPos = Vector3.new(data.x, data.y, data.z)
                
                -- Smooth teleport
                local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
                local tween = TweenService:Create(hrp, tweenInfo, {CFrame = CFrame.new(targetPos)})
                tween:Play()
            end
        end)
        
        DeleteBtn.MouseButton1Click:Connect(function()
            teleportData[name] = nil
            saveTeleportData()
            updateTeleportList()
        end)
        
        ySize = ySize + 53
    end
    
    TeleportList.CanvasSize = UDim2.new(0, 0, 0, math.max(ySize, 0))
end

-- Save button functionality
SaveBtn.MouseButton1Click:Connect(function()
    local name = NameInput.Text
    if name ~= "" and character and character:FindFirstChild("HumanoidRootPart") then
        local pos = character.HumanoidRootPart.Position
        teleportData[name] = {
            x = pos.X,
            y = pos.Y,
            z = pos.Z
        }
        saveTeleportData()
        updateTeleportList()
        NameInput.Text = ""
    end
end)

-- Minimize functionality
local isMinimized = false
MinimizeBtn.MouseButton1Click:Connect(function()
    isMinimized = true
    MainFrame.Visible = false
    FloatingBtn.Visible = true
end)

FloatingBtn.MouseButton1Click:Connect(function()
    isMinimized = false
    FloatingBtn.Visible = false
    MainFrame.Visible = true
end)

-- Close functionality
CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Drag functionality
local dragging = false
local dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- Drag untuk floating button
local floatDragging = false
local floatDragInput, floatDragStart, floatStartPos

FloatingBtn.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        floatDragging = true
        floatDragStart = input.Position
        floatStartPos = FloatingBtn.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                floatDragging = false
            end
        end)
    end
end)

FloatingBtn.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        floatDragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == floatDragInput and floatDragging then
        local delta = input.Position - floatDragStart
        FloatingBtn.Position = UDim2.new(floatStartPos.X.Scale, floatStartPos.X.Offset + delta.X, floatStartPos.Y.Scale, floatStartPos.Y.Offset + delta.Y)
    end
end)

-- Hover effects
local function addHoverEffect(button, hoverColor)
    local originalColor = button.BackgroundColor3
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = hoverColor}):Play()
    end)
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = originalColor}):Play()
    end)
end

addHoverEffect(SaveBtn, Color3.fromRGB(90, 150, 255))
addHoverEffect(MinimizeBtn, CONFIG.SecondaryColor)
addHoverEffect(CloseBtn, Color3.fromRGB(255, 100, 100))
addHoverEffect(FloatingBtn, CONFIG.SecondaryColor)

-- Update character reference saat respawn
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    humanoidRootPart = character:WaitForChild("HumanoidRootPart")
end)

-- Initial update
updateTeleportList()

-- Parent ke game
ScreenGui.Parent = game.CoreGui